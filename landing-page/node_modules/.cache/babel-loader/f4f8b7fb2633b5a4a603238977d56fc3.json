{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rexardiente/Development/Github/coinica-sites/landing-page/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rexardiente/Development/Github/coinica-sites/landing-page/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rexardiente/Development/Github/coinica-sites/landing-page/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useContext,useEffect,useState}from\"react\";import coinica from\"../../assets/image/coinica.png\";import{BiMenuAltRight}from\"react-icons/bi\";import{AiOutlineClose}from\"react-icons/ai\";import{getProvider,ethEnabled,getChainId,getAccounts,onAccountChange,onChainChange}from\"../../services/metamask\";import{AppCtx}from\"../../App\";import styles from\"./Header.module.scss\";// import { Link, useHistory } from \"react-router-dom\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Header=function Header(){var context=useContext(AppCtx);var currConnectedAdd=context===null||context===void 0?void 0:context.address;console.log({context:context});// const history = useHistory();\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),menuOpen=_useState4[0],setMenuOpen=_useState4[1];var _useState5=useState({width:0,height:0}),_useState6=_slicedToArray(_useState5,2),size=_useState6[0],setSize=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),scrollY=_useState8[0],setScrollY=_useState8[1];useEffect(function(){var handleResize=function handleResize(){setSize({width:window.innerWidth,height:window.innerHeight});};var handleScroll=function handleScroll(){setScrollY(window.scrollY);};window.addEventListener(\"resize\",handleResize);window.addEventListener(\"scroll\",handleScroll);return function(){window.removeEventListener(\"resize\",handleResize);window.removeEventListener(\"scroll\",handleScroll);};},[]);useEffect(function(){if(size.width>768&&menuOpen){setMenuOpen(false);}},[size.width,menuOpen]);var menuToggleHandler=function menuToggleHandler(){setMenuOpen(function(p){return!p;});};var handleAccountsChanged=function handleAccountsChanged(accounts){if(typeof context.setAddress===\"function\"&&typeof context.setBalance===\"function\"){if(accounts.length===0){context.setAddress(null);}else if(accounts[0]!==currConnectedAdd){context.setAddress(accounts[0]);}}};var loginHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var provider;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getProvider();case 2:provider=_context.sent;if(!provider){_context.next=19;break;}if(!(provider!==window.ethereum)){_context.next=8;break;}alert(\"Can't connect to MetaMask. Do you have multiple wallets installed?\");_context.next=17;break;case 8:_context.next=10;return ethEnabled();case 10:if(_context.sent){_context.next=12;break;}return _context.abrupt(\"return\");case 12:if(typeof context.setWallet===\"function\"){context.setWallet(provider);}/********************************************/ /* Handle chain (network) and chainChanged  */ /********************************************/getChainId([],function(response){if(response!==\"0x4\"){alert(\"Please connect to Rinkeby Test Network\");window.location.reload();}console.log({getChainId:response});if(typeof context.setChainId===\"function\"){context.setChainId(response);}},function(err){console.log({getChainIdErr:err});if(typeof context.setChainId===\"function\"){context.setChainId(null);}});/*******************************/ /* Access the user's accounts  */ /*******************************/getAccounts([],function(accounts){handleAccountsChanged(accounts);},function(err){console.log({getAccountsErr:err});if(err.code===4001){// EIP-1193 userRejectedRequest error\n// If this happens, the user rejected the connection request.\nalert('Please connect to MetaMask');}else{alert('Error occured in connecting to MetaMask');console.error({getAccountsError:err});}});onAccountChange(handleAccountsChanged);onChainChange(function(){window.location.reload();});case 17:_context.next=20;break;case 19:alert(\"Install metamask extension\");case 20:case\"end\":return _context.stop();}}},_callee);}));return function loginHandler(){return _ref.apply(this,arguments);};}();var headerPositionFixed=function headerPositionFixed(){return scrollY>100?styles.header__positionFixed:\"\";};return/*#__PURE__*/_jsx(\"header\",{className:styles.header,children:/*#__PURE__*/_jsx(\"div\",{className:[styles.header__position,headerPositionFixed()].join(\" \"),children:/*#__PURE__*/_jsxs(\"div\",{className:styles.header__content,children:[/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:styles.header__content__logo,children:/*#__PURE__*/_jsx(\"img\",{src:coinica,width:\"auto\",height:\"50\",alt:\"logo\"})}),/*#__PURE__*/_jsxs(\"nav\",{className:\"\".concat(styles.header__content__nav,\" \").concat(menuOpen&&size.width<768?styles.isMenu:\"\"),children:[/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://staking.coinica.net/\",children:\"Overview\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://staking.coinica.net/pools\",children:\"Staking\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://staking.coinica.net/rewards\",children:\"Rewards\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://staking.coinica.net/vesting\",children:\"Vesting\"})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:loginHandler,children:loading?\"Connecting...\":currConnectedAdd?\"0x..\".concat(currConnectedAdd.slice(-7)):\"Connect Wallet\"})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.header__content__toggle,children:!menuOpen?/*#__PURE__*/_jsx(BiMenuAltRight,{onClick:menuToggleHandler}):/*#__PURE__*/_jsx(AiOutlineClose,{onClick:menuToggleHandler})})]})})});};export default Header;","map":{"version":3,"sources":["/Users/rexardiente/Development/Github/coinica-sites/landing-page/src/components/Header/index.tsx"],"names":["useContext","useEffect","useState","coinica","BiMenuAltRight","AiOutlineClose","getProvider","ethEnabled","getChainId","getAccounts","onAccountChange","onChainChange","AppCtx","styles","Header","context","currConnectedAdd","address","console","log","loading","setLoading","menuOpen","setMenuOpen","width","height","size","setSize","scrollY","setScrollY","handleResize","window","innerWidth","innerHeight","handleScroll","addEventListener","removeEventListener","menuToggleHandler","p","handleAccountsChanged","accounts","setAddress","setBalance","length","loginHandler","provider","ethereum","alert","setWallet","response","location","reload","setChainId","err","getChainIdErr","getAccountsErr","code","error","getAccountsError","headerPositionFixed","header__positionFixed","header","header__position","join","header__content","header__content__logo","header__content__nav","isMenu","slice","header__content__toggle"],"mappings":"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","sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport coinica from \"../../assets/image/coinica.png\";\nimport { BiMenuAltRight } from \"react-icons/bi\";\nimport { AiOutlineClose } from \"react-icons/ai\";\nimport {\n  getProvider,\n  ethEnabled,\n  getChainId,\n  getAccounts,\n  onAccountChange,\n  onChainChange\n} from \"../../services/metamask\";\nimport { AppCtx } from \"../../App\";\nimport styles from \"./Header.module.scss\";\n// import { Link, useHistory } from \"react-router-dom\";\n\ninterface CtxProps {\n  chainId?: any;\n  setChainId?: Function;\n  setWallet?: Function;\n  wallet?: any;\n  address?: any;\n  setAddress?: Function;\n  balance?: any;\n  setBalance?: Function;\n}\n\nconst Header = () => {\n  const context = useContext<CtxProps>(AppCtx);\n  const currConnectedAdd = context?.address;\n  console.log({ context })\n  // const history = useHistory();\n  const [loading, setLoading] = useState(false);\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [size, setSize] = useState({\n    width: 0,\n    height: 0,\n  });\n  const [scrollY, setScrollY] = useState(0);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    };\n\n    const handleScroll = () => {\n      setScrollY(window.scrollY);\n    };\n\n    window.addEventListener(\"resize\", handleResize);\n    window.addEventListener(\"scroll\", handleScroll);\n\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (size.width > 768 && menuOpen) {\n      setMenuOpen(false);\n    }\n  }, [size.width, menuOpen]);\n\n  const menuToggleHandler = () => {\n    setMenuOpen((p) => !p);\n  };\n\n  const handleAccountsChanged = (accounts: any) => {\n    if (typeof (context.setAddress) === \"function\" && typeof (context.setBalance) === \"function\") {\n      if (accounts.length === 0) {\n        context.setAddress(null);\n      } else if (accounts[0] !== currConnectedAdd) {\n        context.setAddress(accounts[0])\n      }\n    }\n  }\n\n  const loginHandler = async () => {\n    //  menuToggleHandler();\n    //  history.push(\"/login);\n    const provider = await getProvider()\n    if (provider) {\n      if (provider !== window.ethereum) {\n        alert(\"Can't connect to MetaMask. Do you have multiple wallets installed?\");\n      } else {\n        if (!(await ethEnabled())) {\n          return\n        }\n\n        if (typeof (context.setWallet) === \"function\") {\n          context.setWallet(provider)\n        }\n\n        /********************************************/\n        /* Handle chain (network) and chainChanged  */\n        /********************************************/\n        getChainId([], (response: any) => {\n          if (response !== \"0x4\") {\n            alert(\"Please connect to Rinkeby Test Network\");\n            window.location.reload();\n          }\n          console.log({ getChainId: response })\n          if (typeof (context.setChainId) === \"function\") {\n            context.setChainId(response)\n          }\n        }, (err: any) => {\n          console.log({ getChainIdErr: err })\n          if (typeof (context.setChainId) === \"function\") {\n            context.setChainId(null)\n          }\n        })\n\n        /*******************************/\n        /* Access the user's accounts  */\n        /*******************************/\n        getAccounts([], (accounts: any) => {\n          handleAccountsChanged(accounts)\n        }, (err: any) => {\n          console.log({ getAccountsErr: err })\n          if (err.code === 4001) {\n            // EIP-1193 userRejectedRequest error\n            // If this happens, the user rejected the connection request.\n            alert('Please connect to MetaMask')\n          } else {\n            alert('Error occured in connecting to MetaMask')\n            console.error({ getAccountsError: err });\n          }\n        })\n\n        onAccountChange(handleAccountsChanged)\n        onChainChange(() => {\n          window.location.reload();\n        })\n      }\n    } else {\n      alert(\"Install metamask extension\");\n    }\n  };\n\n  const headerPositionFixed = () => {\n    return scrollY > 100 ? styles.header__positionFixed : \"\";\n  };\n\n  return (\n    <header className={styles.header}>\n      <div\n        className={[styles.header__position, headerPositionFixed()].join(\" \")}\n      >\n        <div className={styles.header__content}>\n          <a href=\"/\" className={styles.header__content__logo}>\n            <img src={coinica} width=\"auto\" height=\"50\" alt=\"logo\" />\n          </a>\n          <nav\n            className={`${styles.header__content__nav} ${\n              menuOpen && size.width < 768 ? styles.isMenu : \"\"\n            }`}\n          >\n            <ul>\n              <li>\n                <a href=\"https://staking.coinica.net/\">Overview</a>\n              </li>\n              <li>\n                <a href=\"https://staking.coinica.net/pools\">Staking</a>\n              </li>\n              <li>\n                <a href=\"https://staking.coinica.net/rewards\">Rewards</a>\n              </li>\n              <li>\n                <a href=\"https://staking.coinica.net/vesting\">Vesting</a>\n              </li>\n            </ul>\n            <button onClick={loginHandler}>\n              {\n                loading ? \"Connecting...\" :\n                currConnectedAdd ? `0x..${currConnectedAdd.slice(-7)}` :\n                \"Connect Wallet\"\n              }\n            </button>\n          </nav>\n          <div className={styles.header__content__toggle}>\n            {!menuOpen ? (\n              <BiMenuAltRight onClick={menuToggleHandler} />\n            ) : (\n              <AiOutlineClose onClick={menuToggleHandler} />\n            )}\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n"]},"metadata":{},"sourceType":"module"}